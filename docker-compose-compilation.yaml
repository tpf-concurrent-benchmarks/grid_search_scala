version: "3.7"

services:
  worker_compilation:
    build:
      context: .
      dockerfile: ./compilation/Dockerfile
    command: sbt assembly
    volumes:
      - "./containers/worker/src:/app/src"
      - "./containers/worker/build.sbt:/app/build.sbt"
      - "./containers/worker/project/build.properties:/app/project/build.properties"
      - "./containers/worker/project/plugins.sbt:/app/project/plugins.sbt"
      - "~/.ivy2:/root/.ivy2"
      - "./compilation/worker:/app/target"

  manager_compilation:
    build:
      context: .
      dockerfile: ./compilation/Dockerfile
    command: sbt assembly
    volumes:
      - "./containers/manager/src/:/app/src"
      - "./containers/manager/build.sbt:/app/build.sbt"
      - "./containers/manager/project/build.properties:/app/project/build.properties"
      - "./containers/manager/project/plugins.sbt:/app/project/plugins.sbt"
      - "~/.ivy2:/root/.ivy2"
      - "./compilation/manager:/app/target"